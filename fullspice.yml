cookbooks:
- apt:
  - 1.4.2
- yum:
  - 0.6.0
- build-essential:
  - 1.0.0
- users:
  - 1.1.2
- sudo:
  - 1.1.0
- chef-client:
  - 1.1.2
- ohai:
  - 1.0.2
- ntp:
  - 1.1.8
- python:
  - 1.0.6
- bluepill:
  - 2.0.0
- runit:
  - 0.15.0
- apache2:
  - 1.1.8 # This is actually beyond this one, bleeding edge from github
- haproxy:
  - 1.0.4
- nginx:
  - 0.101.2
- munin:
  - 1.0.3
- mongodb:
- fullstack:


roles:
- base:
- load_balancer:
- load_gen:
- mongodb-replset-member:
- monitoring:
- webserver:


environments:
- fullstack:

data bags:
  - users:
    - miketheman

nodes:
# stats tracker
- ec2 1:
  - role[base] role[monitoring]
  - -Z us-east-1a -I ami-e565ba8c -G fullstack -S aws-test-dev -i .aws/aws-test-dev.pem -x ec2-user -d chef-full -E fullstack -f m1.small

# database nodes, replset
- ec2 3:
  - role[base] role[mongodb-replset-member]
  - -Z us-east-1a -I ami-e565ba8c -G fullstack -S aws-test-dev -i .aws/aws-test-dev.pem -x ec2-user -d chef-full -E fullstack -f m1.large

# webapp nodes
- ec2 2:
  - role[base] role[webserver]
  - -Z us-east-1a -I ami-e565ba8c -G fullstack -S aws-test-dev -i .aws/aws-test-dev.pem -x ec2-user -d chef-full -E fullstack -f m1.large

# load balancer
- ec2 1:
  - role[base] role[load_balancer]
  - -Z us-east-1a -I ami-e565ba8c -G fullstack -S aws-test-dev -i .aws/aws-test-dev.pem -x ec2-user -d chef-full -E fullstack -f m1.large

# client load simulator
- ec2 2:
  - role[base] role[load_gen]
  - -Z us-east-1a -I ami-e565ba8c -G fullstack -S aws-test-dev -i .aws/aws-test-dev.pem -x ec2-user -d chef-full -E fullstack -f m1.large
